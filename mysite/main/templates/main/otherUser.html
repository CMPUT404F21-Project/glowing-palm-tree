{% extends 'main/base.html' %}
{% block style %}
{% endblock %}

{% block title %}
User Center
{% endblock %}

{% block content %}
    <div class="row">                                  
        <div class="container">
            <div class="col-sm-4" >{% if profileImage%}
                <img style=" width: 80%; border-radius: 50%; 
                    margin-bottom: 30pt;display: block;
                    margin-left: auto;
                    margin-right: auto;" 
                    src="{{otherUser.profileImage}}">
                {%else%}
                <img style=" width: 80%; border-radius: 50%; 
                            margin-bottom: 30pt;display: block;
                            margin-left: auto;
                            margin-right: auto;" 
                            src="https://i0.wp.com/www.repol.copl.ulaval.ca/wp-content/uploads/2019/01/default-user-icon.jpg">
                
                {%endif%}
             </div>
            
            <div class="col-sm-8">
                    {% if following %}
                        <a href="/unfollow/{{otherUser.localId}}" class="btn btn-success" type="submit"> Unfollow</a>
                    {% else %}
                        <a href="/friendRequest/{{user.localId}}/{{otherUser.localId}}" class="btn btn-success" type="submit">Follow</a>
                        <br>
                        {% endif%}
                <br>
                <table class="table table-striped">
                    <tbody>
                     <tr>
                        <td>User Name</td>
                        <td>{{otherUser.displayName}}</td>
                    </tr>   
                    <tr>
                        <td>Email</td>
                        <td>{{otherUser.email}}</td>
                    </tr>
                    <tr>
                        <td>Github</td>
                        <td>{{otherUser.github}}</td>
                    </tr>
                    </tbody>
                </table>
                <a href="{{otherUser.id}}/posts" class="btn btn-success">Post List</a>
                <a href="{{otherUser.id}}/githubFlow" class="btn btn-success">Github Flow</a>
            </div>
        </div>
    </div>
    <script>
        var contentBody;
        var counter = 0;
      
        function addImage(contentBody, src){
          let img = new Image();
          img.src = src;
          contentBody.innerHTML = '';
          contentBody.appendChild(img);
          contentBody.setAttribute('style', 'display:flex; justify-content: center');
        }
    </script>
    <!-- {% for pl in otherUser.moment.all %} -->
        <!-- <div class="moment" style="margin-top:40pt;">
        <div class="panel panel-default">
            <div class="panel-heading" style="font-size:x-large">{{pl.title}}</div>
            <div class="panel-body"><a id="content-body" href="{{pl.id}}">{{pl.content}}</a></div>

            {% if pl.contentType == "JPEG" or pl.contentType == "PNG" or pl.contentType == "application" %}
            <script type="text/javascript">
                contentBody = [...document.querySelectorAll('#content-body')][counter];
                addImage(contentBody, contentBody.innerText);
            </script>
            {% endif %}
            <script>
              counter += 1;
            </script>

        </div>
        </div> -->

    <!-- {% endfor %}     -->
    
{% endblock %}
