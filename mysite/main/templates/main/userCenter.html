{% extends 'main/base.html' %}
{% block style %}
<style>


    #editForm {
        float: left;
    }

    #deleteForm {
        float: right;
    }
  </style>
{% endblock %}

{% block title %}
User Center
{% endblock %}

{% block content %}
    <div class="container"></div>
        <img style=" width: 25%; border-radius: 50%; 
                    margin-bottom: 30pt;display: block;
                    margin-left: auto;
                    margin-right: auto;" 
                    src="https://i0.wp.com/www.repol.copl.ulaval.ca/wp-content/uploads/2019/01/default-user-icon.jpg"> 
                    
                        
                        
                        
    <div class="row">                                  
        <div class="container">
            <div class="col-sm-2" ></div>
            <div class="col-sm-8">
                <table class="table table-striped">
                    <tbody>
                    <tr>
                        <td>Email</td>
                        <td>{{user.email}}</td>
                    </tr>
                    <tr>
                        <td>User Name</td>
                        <td>{{user.username}}</td>
                    </tr>
                    <tr>
                        <td>Github</td>
                        <td>{{user.github}}</td>
                    </tr>
                    </tbody>
                </table>
                <a href="/userCenterEdit" style="float: right;">[edit]</a>

                <script>
                    var contentBody;
                    var counter = 0;
                  
                    function addImage(contentBody, src){
                      let img = new Image();
                      img.src = src;
                      contentBody.innerHTML = '';
                      contentBody.appendChild(img);
                      contentBody.setAttribute('style', 'display:flex; justify-content: center');
                    }
                  </script>

                {% for pl in user.moment.all %}
                    <div class="moment" style="margin-top:40pt;">
                    <div class="panel panel-default">
                        <div class="panel-heading" style="font-size:x-large">{{pl.title}}</div>
                        <div class="panel-body"><a id="content-body" href="{{pl.id}}">{{pl.content}}</a></div>
                        {% if pl.contentType == "JPEG" or pl.contentType == "PNG" or pl.contentType == "application" %}
                        <script type="text/javascript">
                            contentBody = [...document.querySelectorAll('#content-body')][counter];
                            addImage(contentBody, contentBody.innerText);
                        </script>
                        {% endif %}
                        <script>
                          counter += 1;
                      </script>

                        
                    </div>

                    <form id="editForm" method="get" action="{{pl.id}}" class="form-group">
                        <input type="hidden" name="edit" value="edit">
                        {% csrf_token %}
                        <button class="btn btn-primary" type="submit">Edit</button> 
                    </form>

                    
                    <form id="deleteForm" method="post" action="{{pl.id}}" class="form-group">
                        <input type="hidden" name="_METHOD" value="Delete"/>
                        {% csrf_token %}
                        <button class="btn btn-primary" type="submit">Delete</button> 
                    </form>
                    </div>
                
                {% endfor %}
            </div>
            <div class="col-sm-2"></div> 
        </div>
        
    </div>
    
    
{% endblock %}
